{"name": "TC_004: Multiple offers for same segment — best offer applied", "status": "failed", "statusDetails": {"message": "AssertionError: assert 190 == 180", "trace": "cart_offer = <library.services.cart_offer_services.CartOfferServices object at 0x7646dc50b5c0>\nmockserver = <library.mockserver.MockServer object at 0x7646dc3545c0>\n\n    @allure.feature(\"Cart Offer - Business Rule Validation\")\n    @pytest.mark.validation\n    @allure.title(\"TC_004: Multiple offers for same segment — best offer applied\")\n    def test_multiple_offers_best_selected(cart_offer: CartOfferServices, mockserver: MockServer):\n        mockserver.set_user_segment_mock(user_id=1, segment=\"p1\")\n        cart_offer.create_offer(restaurant_id=1, offer_type=\"FLATX\", offer_value=10, customer_segment=[\"p1\"])\n        cart_offer.create_offer(restaurant_id=1, offer_type=\"FLATX\", offer_value=20, customer_segment=[\"p1\"])\n    \n        response = cart_offer.apply_offer(cart_value=200, user_id=1, restaurant_id=1)\n    \n        assert response.status_code == 200\n>       assert response.json()[\"cart_value\"] == 180\nE       assert 190 == 180\n\ntests/test_business_logic_validation.py:75: AssertionError"}, "attachments": [{"name": "log", "source": "3cf01398-cd32-4fdb-97db-0c604f3d10cf-attachment.txt", "type": "text/plain"}], "start": 1752150717927, "stop": 1752150717970, "uuid": "cff55b97-8e26-46dc-9bb1-a71604d29576", "historyId": "2ea4c0280354298370fd84f24e367945", "testCaseId": "2ea4c0280354298370fd84f24e367945", "fullName": "tests.test_business_logic_validation#test_multiple_offers_best_selected", "labels": [{"name": "feature", "value": "Cart Offer - Business Rule Validation"}, {"name": "tag", "value": "validation"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_business_logic_validation"}, {"name": "host", "value": "LAPTOP-AEEGI4HU"}, {"name": "thread", "value": "171954-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_business_logic_validation"}]}